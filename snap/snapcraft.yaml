name: kprojekt-cli
base: core18
version: '1.0.0'
summary: Kafka Topology Visualization
description: |
  Kafka Topology Visualization
  kprojekt-cli is a program that reads topology description generated by Kafka and renders it as a graph.
grade: stable
confinement: strict

apps:
  kprojekt-cli:
    command: bin/kprojekt-cli
    environment:
      JAVA_HOME: $SNAP/usr/lib/jvm/java-11-openjdk-amd64
      PATH: $JAVA_HOME/bin:$PATH

parts:
  kprojekt-cli:
    plugin: sbt
    source: https://github.com/gchudnov/kprojekt
    source-type: git
    build-packages:
    - curl
    - unzip
    - zip
    stage-packages:
    - openjdk-11-jre-headless
    - graphviz
    override-stage: |
      snapcraftctl stage
      dot -c
